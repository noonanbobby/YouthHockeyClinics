@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════
   NHL Team Theme System — CSS Custom Properties
   Set dynamically by ThemeProvider.tsx
   ═══════════════════════════════════════════════ */

/* Light mode defaults */
:root {
  --theme-primary: #0ea5e9;
  --theme-secondary: #0284c7;
  --theme-accent: #38bdf8;
  --theme-bg: #f8fafc;
  --theme-header-bg: #ffffff;
  --theme-card-bg: #ffffff;
  --theme-card-border: rgba(0, 0, 0, 0.08);
  --theme-card-hover: rgba(0, 0, 0, 0.04);
  --theme-surface: #f1f5f9;
  --theme-nav-bg: #ffffff;
  --theme-glow: rgba(14, 165, 233, 0.15);
  --theme-text: #0f172a;
  --theme-text-secondary: #475569;
  --theme-text-muted: #94a3b8;
}

/* Dark mode overrides — high contrast for readability */
.dark {
  --theme-bg: #030712;
  --theme-header-bg: #0a0f1e;
  --theme-card-bg: #111827;
  --theme-card-border: rgba(255, 255, 255, 0.08);
  --theme-card-hover: rgba(255, 255, 255, 0.12);
  --theme-surface: #0f172a;
  --theme-nav-bg: #0a0f1e;
  --theme-glow: rgba(14, 165, 233, 0.4);
  --theme-text: #f1f5f9;
  --theme-text-secondary: #94a3b8;
  --theme-text-muted: #64748b;
}

/* ─── Core Theme Utilities ─────────────────────── */
.theme-primary { color: var(--theme-primary); }
.theme-secondary { color: var(--theme-secondary); }
.theme-accent { color: var(--theme-accent); }

.theme-text { color: var(--theme-text); }
.theme-text-secondary { color: var(--theme-text-secondary); }
.theme-text-muted { color: var(--theme-text-muted); }

.theme-bg { background-color: var(--theme-bg); }
.theme-bg-primary { background-color: var(--theme-primary); }
.theme-bg-secondary { background-color: var(--theme-secondary); }
.theme-bg-surface { background-color: var(--theme-surface); }
.theme-bg-card { background-color: var(--theme-card-bg); }
.theme-bg-header { background-color: var(--theme-header-bg); }
.theme-bg-nav { background-color: var(--theme-nav-bg); }

/* Alpha variants */
.theme-bg-primary-5 { background-color: color-mix(in srgb, var(--theme-primary) 5%, transparent); }
.theme-bg-primary-10 { background-color: color-mix(in srgb, var(--theme-primary) 10%, transparent); }
.theme-bg-primary-15 { background-color: color-mix(in srgb, var(--theme-primary) 15%, transparent); }
.theme-bg-primary-20 { background-color: color-mix(in srgb, var(--theme-primary) 20%, transparent); }
.theme-bg-primary-30 { background-color: color-mix(in srgb, var(--theme-primary) 30%, transparent); }
.theme-bg-primary-50 { background-color: color-mix(in srgb, var(--theme-primary) 50%, transparent); }

/* Borders */
.theme-border-primary { border-color: var(--theme-card-border); }
.theme-border-primary-strong { border-color: color-mix(in srgb, var(--theme-primary) 40%, transparent); }

/* Ring / Focus */
.theme-ring { --tw-ring-color: var(--theme-primary); }
.theme-ring-glow { box-shadow: 0 0 20px var(--theme-glow); }

/* Gradient helpers */
.theme-gradient-header {
  background: linear-gradient(180deg, var(--theme-header-bg) 0%, var(--theme-bg) 100%);
}
.theme-gradient-card {
  background: linear-gradient(135deg, var(--theme-card-bg) 0%, var(--theme-bg) 100%);
}
.theme-gradient-accent {
  background: linear-gradient(90deg, var(--theme-primary), var(--theme-secondary));
}
.theme-gradient-radial {
  background: radial-gradient(ellipse at top, color-mix(in srgb, var(--theme-primary) 8%, transparent) 0%, transparent 60%);
}

/* ─── Hockey Arena Effects ────────────────────── */
.ice-surface {
  background-image:
    radial-gradient(ellipse at 20% 50%, color-mix(in srgb, var(--theme-primary) 5%, transparent) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 50%, color-mix(in srgb, var(--theme-secondary) 3%, transparent) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 0%, color-mix(in srgb, var(--theme-primary) 6%, transparent) 0%, transparent 35%);
}
.arena-spotlight {
  background-image: radial-gradient(ellipse at 50% -100%, color-mix(in srgb, var(--theme-primary) 15%, transparent) 0%, transparent 60%);
}

/* ─── Safe Areas for iPhone ────────────────────── */
.safe-area-top { padding-top: env(safe-area-inset-top); }
.safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }

/* ─── Scrollbar ────────────────────────────────── */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--theme-card-border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--theme-card-hover); }

/* ─── Global Overrides ─────────────────────────── */
html {
  overscroll-behavior-y: contain;
}
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
  overflow-x: hidden;
  background-color: var(--theme-bg);
  transition: background-color 0.4s ease;
}

/* ─── Leaflet Dark Theme ───────────────────────── */
.leaflet-container { background: var(--theme-bg) !important; font-family: inherit !important; }
.leaflet-control-zoom a { background: var(--theme-surface) !important; color: white !important; border-color: rgba(255,255,255,0.1) !important; backdrop-filter: blur(8px); }
.leaflet-control-zoom a:hover { background: var(--theme-header-bg) !important; }
.leaflet-control-attribution { background: var(--theme-surface) !important; color: rgba(255,255,255,0.4) !important; font-size: 9px !important; backdrop-filter: blur(8px); }
.leaflet-control-attribution a { color: var(--theme-primary) !important; opacity: 0.6; }
.custom-marker { background: transparent !important; border: none !important; }

@keyframes marker-pulse {
  0% { box-shadow: 0 0 0 0 var(--theme-glow); }
  70% { box-shadow: 0 0 0 15px transparent; }
  100% { box-shadow: 0 0 0 0 transparent; }
}

/* ─── Form Elements ────────────────────────────── */
select option { background: var(--theme-bg); color: var(--theme-text); }
.dark input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); opacity: 0.5; }

/* ─── Animations ───────────────────────────────── */
main { animation: fadeIn 0.2s ease-out; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.skeleton {
  background: linear-gradient(90deg, var(--theme-card-hover) 25%, var(--theme-card-border) 50%, var(--theme-card-hover) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ─── Utility: Line Clamping ───────────────────── */
.line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
